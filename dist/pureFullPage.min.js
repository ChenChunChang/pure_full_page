"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Utils={addHandler:function(t,e,i){t.addEventListener?(t.addEventListener(e,i,!1),this.addHandler=function(t,e,i){t.addEventListener(e,i,!1)}):t.attachEvent&&(t.attachEvent("on"+e,i),this.addHandler=function(t,e,i){t.attachEvent("on"+e,i)})},getWheelDelta:function(t){return t.wheelDelta?(this.getWheelDelta=function(t){return t.wheelDelta},t.wheelDelta):(this.getWheelDelta=function(t){return-t.detail},-t.detail)},throttle:function(t,e,i,n){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e,i)},n)},deleteClassName:function(t,e){t.classList.contains(e)&&t.classList.remove(e)},polyfill:function(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var s=arguments[n];if(null!=s)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},writable:!0,configurable:!0})}},PureFullPage=function(){function e(t){_classCallCheck(this,e);Utils.polyfill(),this.options=Object.assign({container:"#pureFullPage",isShowNav:!0,definePages:function(){}},t),this.main=document.querySelector(this.options.container),this.pagesNum=document.querySelectorAll(".page").length,this.navDots=[],this.viewHeight=document.documentElement.clientHeight,this.currentPosition=0,this.THROTTLE_TIME=150}return _createClass(e,[{key:"getNewPosition",value:function(){this.viewHeight=document.documentElement.clientHeight;var i=void 0;this.navDots.forEach(function(t,e){t.classList.contains("active")&&(i=e)}),this.currentPosition=-i*this.viewHeight,this.turnPage(this.currentPosition)}},{key:"handleWindowResize",value:function(t){Utils.throttle(this.getNewPosition,this,t,this.THROTTLE_TIME)}},{key:"turnPage",value:function(t){this.main.style.top=t+"px"}},{key:"changeNavStyle",value:function(t){if(this.options.isShowNav){this.navDots.forEach(function(t){Utils.deleteClassName(t,"active")});var e=-t/this.viewHeight;this.navDots[e].classList.add("active")}}},{key:"createNav",value:function(){var i=this,t=document.createElement("div");t.className="nav",this.main.appendChild(t);for(var e=0;e<this.pagesNum;e++)t.innerHTML+='<p class="nav-dot"><span></span></p>';var n=document.querySelectorAll(".nav-dot");this.navDots=Array.prototype.slice.call(n),this.navDots[0].classList.add("active"),this.navDots.forEach(function(t,e){Utils.addHandler(t,"click",function(){i.currentPosition=-e*i.viewHeight,i.turnPage(i.currentPosition),i.navDots.forEach(function(t){Utils.deleteClassName(t,"active")}),t.classList.add("active")})})}},{key:"scrollMouse",value:function(t){var e=Utils.getWheelDelta(t);e<0&&this.main.offsetTop>-this.viewHeight*(this.pagesNum-1)&&(this.currentPosition=this.currentPosition-this.viewHeight,this.currentPosition<-this.viewHeight*(this.pagesNum-1)&&(this.currentPosition=-this.viewHeight*(this.pagesNum-1)),this.turnPage(this.currentPosition),this.changeNavStyle(this.currentPosition),this.options.definePages(this.currentPosition)),0<e&&this.main.offsetTop<0&&(this.currentPosition=this.currentPosition+this.viewHeight,0<this.currentPosition&&(this.currentPosition=0),this.turnPage(this.currentPosition),this.changeNavStyle(this.currentPosition),this.options.definePages(this.currentPosition))}},{key:"handleMouseWheel",value:function(t){Utils.throttle(this.scrollMouse,this,t,this.THROTTLE_TIME)}},{key:"init",value:function(){this.options.isShowNav&&this.createNav(),-1===navigator.userAgent.toLowerCase().indexOf("firefox")?Utils.addHandler(document,"mousewheel",this.handleMouseWheel.bind(this)):(console.log(111),Utils.addHandler(document,"DOMMouseScroll",this.handleMouseWheel.bind(this))),Utils.addHandler(window,"resize",this.handleWindowResize.bind(this))}}]),e}();