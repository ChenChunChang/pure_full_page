"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var utils={addHandler:function(t,e,i){t.addEventListener(e,i,!1),this.addHandler=function(t,e,i){t.addEventListener(e,i,!1)}},getWheelDelta:function(t){return t.wheelDelta?(this.getWheelDelta=function(t){return t.wheelDelta},t.wheelDelta):(this.getWheelDelta=function(t){return-t.detail},-t.detail)},debounce:function(t,e,i,n){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e,i)},n)},throttle:function(i,n,s,o){return function(){var t=arguments,e=o&&!i.tID;clearTimeout(i.tID),i.tID=setTimeout(function(){i.tID=null,o||i.apply(n,t)},s),e&&i.apply(n,t)}},deleteClassName:function(t,e){t.classList.contains(e)&&t.classList.remove(e)},polyfill:function(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var s=arguments[n];if(null!=s)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},writable:!0,configurable:!0})}},PureFullPage=function(){function e(t){_classCallCheck(this,e);utils.polyfill(),this.options=Object.assign({isShowNav:!0,delay:150,definePages:function(){}},t),this.options.definePages=this.options.definePages.bind(this),this.container=document.querySelector("#pureFullPage"),this.pages=document.querySelectorAll(".page"),this.pagesNum=this.pages.length,this.navDots=[],this.viewHeight=document.documentElement.clientHeight,this.currentPosition=0,this.DELAY=this.options.delay,this.startY=void 0}return _createClass(e,[{key:"getNewPosition",value:function(){this.viewHeight=document.documentElement.clientHeight,this.container.style.height=this.viewHeight+"px";var i=void 0;this.navDots.forEach(function(t,e){t.classList.contains("active")&&(i=e)}),this.currentPosition=-i*this.viewHeight,this.turnPage(this.currentPosition)}},{key:"handleWindowResize",value:function(t){utils.debounce(this.getNewPosition,this,t,this.DELAY)}},{key:"turnPage",value:function(t){this.container.style.top=t+"px"}},{key:"changeNavStyle",value:function(t){if(this.options.isShowNav){this.navDots.forEach(function(t){utils.deleteClassName(t,"active")});var e=-t/this.viewHeight;this.navDots[e].classList.add("active")}}},{key:"createNav",value:function(){var i=this,t=document.createElement("div");t.className="nav",this.container.appendChild(t);for(var e=0;e<this.pagesNum;e++)t.innerHTML+='<p class="nav-dot"><span></span></p>';var n=document.querySelectorAll(".nav-dot");this.navDots=Array.prototype.slice.call(n),this.navDots[0].classList.add("active"),this.navDots.forEach(function(t,e){utils.addHandler(t,"click",function(){i.currentPosition=-e*i.viewHeight,i.options.definePages(),i.turnPage(i.currentPosition),i.navDots.forEach(function(t){utils.deleteClassName(t,"active")}),t.classList.add("active")})})}},{key:"goUp",value:function(){this.currentPosition=this.currentPosition+this.viewHeight,this.turnPage(this.currentPosition),this.changeNavStyle(this.currentPosition),this.options.definePages()}},{key:"goDown",value:function(){this.currentPosition=this.currentPosition-this.viewHeight,this.turnPage(this.currentPosition),this.changeNavStyle(this.currentPosition),this.options.definePages()}},{key:"scrollMouse",value:function(t){var e=utils.getWheelDelta(t);e<0&&-this.container.offsetTop<=this.viewHeight*(this.pagesNum-2)&&this.goDown(),0<e&&-this.container.offsetTop>=this.viewHeight&&this.goUp()}},{key:"init",value:function(){var e=this;this.container.style.height=this.viewHeight+"px",this.options.isShowNav&&this.createNav();var t=utils.throttle(this.scrollMouse,this,this.DELAY,!0);-1===navigator.userAgent.toLowerCase().indexOf("firefox")?utils.addHandler(document,"mousewheel",t):utils.addHandler(document,"DOMMouseScroll",t),utils.addHandler(document,"touchstart",function(t){e.startY=t.touches[0].pageY}),utils.addHandler(document,"touchend",function(t){0<t.changedTouches[0].pageY-e.startY?e.goUp():e.goDown()}),utils.addHandler(window,"resize",this.handleWindowResize.bind(this))}}]),e}();